<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>게시판</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <header>
        <h1 style="font-size: 24px;">게시판</h1>
        <div id="top_menu">
            <a href="#">HOME</a>
            <a href="#">NOTICE</a>
            <a href="#">LOGIN</a>
            <a href="#">JOIN</a>
        </div>
    </header>

    <div id="page">
        <div class="container">
            <form id="post-form" class="post-form">
                <h2>게시물 등록</h2>
                <input type="text" id="post-title" placeholder="제목" required>
                <textarea id="post-content" placeholder="내용" required></textarea>
                <input type="text" id="post-video" placeholder="YouTube URL" required>
                <div id="z"></div>
                <button type="submit">작성</button>
            </form>

            <div class="post-list" id="post-list"></div>
            <div class="post-spin" id="x">
                <div id="y">
                    <div class="post-detail" id="post-detail">
                        <div class="post-detail-title"></div>
                        <div class="post-detail-content"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>© 2024 게시판. 모든 권리 보유.</p>
    </footer>

    <script>
        let posts = [];

        document.getElementById('post-form').addEventListener('submit', function (event) {
            event.preventDefault();
            const title = document.getElementById('post-title').value;
            const content = document.getElementById('post-content').value;
            const videoUrl = document.getElementById('post-video').value;

            posts.push({ title, content, videoUrl });
            this.reset();
            renderPosts();
        });

        function renderPosts() {
            const postList = document.getElementById('post-list');
            postList.innerHTML = '';
            posts.forEach((post, index) => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                <div onclick="viewPost(${index})">
                    <h3>${post.title}</h3>
                    <p>${post.content.slice(0, 50)}...</p>
                </div>
            `;
                postList.appendChild(card);
            });
        }

        function viewPost(index) { // 게시물 보기 함수
            const post = posts[index]; // 선택된 게시물 가져오기
            const titleDiv = document.querySelector('.post-detail-title'); // 제목 부분 가져오기
            const contentDiv = document.querySelector('.post-detail-content'); // 내용 부분 가져오기

            titleDiv.innerHTML = `<h2>${post.title}</h2>`; // 제목 표시
            contentDiv.innerHTML = `<p>${post.content}</p>
                                    <iframe src="${post.videoUrl}?autoplay=1&mute=1" frameborder="0" allowfullscreen></iframe>`; // 내용 및 비디오 표시

            const postDetail = document.getElementById('post-detail'); // 상세 보기 요소 가져오기
            postDetail.style.display = 'block'; // 상세 보기 표시
            postDetail.style.height = 'auto'; // 높이 자동 조정
        }
    </script>

</body>

</html>


        function viewPost(index) { // 게시물 보기 함수
            const post = posts[index]; // 선택된 게시물 가져오기
            const x = document.getElementById('z'); // 상세 보기 요소 가져오기
            x.innerHTML = `
        <h2>${post.title}</h2> <!-- 제목 표시 -->
        <p>${post.content}</p> <!-- 내용 표시 -->
        `;
            const postDetail = document.getElementById('post-detail'); // 상세 보기 요소 가져오기
            postDetail.style.display = 'block'; // 상세 보기 표시
            postDetail.innerHTML = ` 
            <iframe src="${post.videoUrl}?autoplay=1&mute=1" frameborder="0" allowfullscreen></iframe> <!-- 비디오 표시 -->
        `;

            postDetail.style.height = 'auto'; // 높이 자동 조정

            postDetail.addEventListener('mousemove', function (e) { // 마우스 움직임 이벤트
                const x = e.offsetX; // X 좌표
                const y = e.offsetY; // Y 좌표
                const rotateY = -1 / 5 * x + 20; // Y축 회전 계산
                const rotateX = 4 / 30 * y - 20; // X축 회전 계산

                postDetail.style.transform = `perspective(350px) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`; // 3D 회전 효과
            });

            postDetail.addEventListener('mouseout', function () { // 마우스 아웃 이벤트
                postDetail.style.transform = 'perspective(350px) rotateY(0deg) rotateX(0deg)'; // 원래 위치로 복원
            });
        }
    </script>

</body>

</html>